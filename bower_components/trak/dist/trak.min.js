/* trak.js v0.3.0 | (c) 2014 @mrmartineau | https://github.com/tmwagency/trak.js
   Universal event tracking API. */
var trak=function(){"use strict";var a=function(a){return a?trak.options.clean?e.call(this,a).toString().replace(/\s|'|"/g,g.delimeter).toLowerCase():e.call(this,a):""},b=function(b){var c=f(b),d=a.call(this,c.category),e=a.call(this,c.action),h=a.call(this,c.label),i=c.eventName,j=c.value,k=c.nonInteraction;"ga"===g.trackType&&"undefined"!=typeof ga?ga("send","event",d,e,h,j,{nonInteraction:k}):"_gaq"===g.trackType&&"undefined"!=typeof _gaq?_gaq.push(["_trackEvent",d,e,h,j]):"gtm"===g.trackType&&"undefined"!=typeof dataLayer&&dataLayer.push({event:i,eventCategory:d,eventAction:e,eventLabel:h,eventValue:j}),void 0!==g.additionalTypes&&g.additionalTypes(),g.debug&&console.debug("Debug message:\n Category:",d,"\n Action:",e,"\n Label:",h)},c=function(){var a=null!==this.getAttribute("data-trakwithjs")?!0:!1;a||d.call(this)},d=function(){var a=JSON.parse(this.getAttribute("data-trak"));b.call(this,a)},e=function(a){var b;switch(a){case"page.title":b=document.title;break;case"page.href":b=window.location.href;break;case"link.href":b=this.href;break;case"link.title":b=this.title;break;case"referrer":b=document.referrer?document.referrer:"No referrer";break;default:b=a}return b},f=function(a){return{category:a&&a.category||"",action:a&&a.action||"",label:a&&a.label||"",value:a&&a.value||0,nonInteraction:a&&a.nonInteraction||!1,eventName:a&&a.eventName||void 0}},g={clean:!0,delimeter:"_",trackType:"ga",additionalTypes:void 0,debug:!1},h=function(){for(var a=document.querySelectorAll("[data-trak]"),b=0;b<a.length;b++)a[b].addEventListener?a[b].addEventListener("click",c):a[b].attachEvent&&a[b].attachEvent("onclick",c)};return{start:h,clean:a,event:b,attrEvent:d,wildcard:e,options:g}}();"undefined"!=typeof define&&define.amd?define(function(){"use strict";return trak}):"undefined"!=typeof module&&module.exports?module.exports=trak:window.trak=trak;